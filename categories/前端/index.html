<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>分类: 前端 - 哲班丘</title><meta description="chuck的技术博客，每两周更新一次，记录成长的点点滴滴。"><meta property="og:type" content="blog"><meta property="og:title" content="哲班丘"><meta property="og:url" content="http://inchill.github.io/"><meta property="og:site_name" content="哲班丘"><meta property="og:description" content="chuck的技术博客，每两周更新一次，记录成长的点点滴滴。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://inchill.github.io/img/og_image.png"><meta property="article:author" content="chuckliu"><meta property="article:tag" content="Web"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://inchill.github.io"},"headline":"哲班丘","image":["http://inchill.github.io/img/og_image.png"],"author":{"@type":"Person","name":"chuckliu"},"description":"chuck的技术博客，每两周更新一次，记录成长的点点滴滴。"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?aa6e1f71b7391ccb26e54a2566b78efd";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="哲班丘" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Inchill"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">前端</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/07/05/webpack-vue-ts-koa2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%90%88%E4%BD%93%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"><img class="thumbnail" src="/images/webpack+vue.jpg" alt="webpack+vue+ts+koa2前后端合体搭建博客"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-07-05T06:56:29.000Z" title="2020-07-05T06:56:29.000Z">2020-07-05</time><span class="level-item"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span><span class="level-item">26 分钟 读完 (大约 3887 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/07/05/webpack-vue-ts-koa2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%90%88%E4%BD%93%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">webpack+vue+ts+koa2前后端合体搭建博客</a></h1><div class="content"><h3 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h3><p>博客采用前后端分离，前端用vue+ts+stylus开发，基于MVVM模式；后端用koa2+mysql+sequelize ORM开发，基于MVC模式。前后端由webpack进行合体，并且对webpack进行了生产模式、开发模式分离配置。最终将前端打包的dist和后端的server上传至服务器，前端代码看作是后端的静态资源。</p>
<p>由于之前时间有限，博客的功能只做了登录、注册、写文章、修改文章、修改昵称改头像、关注、评论，感兴趣的同学可以持续添加，比如回复、点赞、分享、分类、标签、推荐等功能。除了功能，样式也可以更改。本来我当初是想仿掘金的，当时时间有限，做了几天就没写了。</p>
<p><a href="http://39.97.212.97:3001">博客演示地址</a></p>
<p><a href="https://github.com/Inchill/tech-blog">GitHub地址</a></p>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">blog</span><br><span class="line">├─.babelrc</span><br><span class="line">├─.dockerignore</span><br><span class="line">├─.gitignore</span><br><span class="line">├─Dockerfile</span><br><span class="line">├─package-lock.json</span><br><span class="line">├─package.json</span><br><span class="line">├─README.md</span><br><span class="line">├─tsconfig.json</span><br><span class="line">├─webpack.common.js</span><br><span class="line">├─webpack.dev.js</span><br><span class="line">├─webpack.prod.js</span><br><span class="line">├─static</span><br><span class="line">|   └defaultAvatar.png</span><br><span class="line">├─server</span><br><span class="line">|   ├─app.ts</span><br><span class="line">|   ├─router.ts</span><br><span class="line">|   ├─views</span><br><span class="line">|   |   └index.html</span><br><span class="line">|   ├─services</span><br><span class="line">|   |    ├─BlogService.ts</span><br><span class="line">|   |    ├─CommentService.ts</span><br><span class="line">|   |    ├─FollowService.ts</span><br><span class="line">|   |    ├─ReplyService.ts</span><br><span class="line">|   |    ├─SortService.ts</span><br><span class="line">|   |    └UserService.ts</span><br><span class="line">|   ├─public</span><br><span class="line">|   |   ├─dist</span><br><span class="line">|   ├─models</span><br><span class="line">|   |   ├─BlogModel.ts</span><br><span class="line">|   |   ├─CommentModel.ts</span><br><span class="line">|   |   ├─FollowModel.ts</span><br><span class="line">|   |   ├─ReplyModel.ts</span><br><span class="line">|   |   ├─SortModel.ts</span><br><span class="line">|   |   └UserModel.ts</span><br><span class="line">|   ├─controllers</span><br><span class="line">|   |      ├─BlogController.ts</span><br><span class="line">|   |      ├─CommentController.ts</span><br><span class="line">|   |      ├─FollowController.ts</span><br><span class="line">|   |      ├─SortController.ts</span><br><span class="line">|   |      └UserController.ts</span><br><span class="line">|   ├─config</span><br><span class="line">|   |   ├─db.ts</span><br><span class="line">|   |   └tools.ts</span><br><span class="line">├─node_modules</span><br></pre></td></tr></table></figure>

<h3 id="1-初始化项目"><a href="#1-初始化项目" class="headerlink" title="1. 初始化项目"></a>1. 初始化项目</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm i webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure>

<h3 id="2-构建基础架构-安装插件"><a href="#2-构建基础架构-安装插件" class="headerlink" title="2.构建基础架构-安装插件"></a>2.构建基础架构-安装插件</h3><ul>
<li>2.1 实现每次编译前自动清空dist目录，安装clean-webpack-plugin</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i clean-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>2.2 实现从HTML模板自动生成最终HTML，安装html-webpack-plugin</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i html-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>2.3 配置typescript环境，安装ts-loader、typescript</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i ts-loader typescript --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>2.4 搭建开发环境的热监测服务器，安装webpack-dev-server</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>2.5 构建项目</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">| - client</span><br><span class="line">| - node_modules</span><br><span class="line">| - server</span><br><span class="line">	| - public</span><br><span class="line">	| - views</span><br><span class="line">		| - index.html</span><br><span class="line">.gitignore</span><br><span class="line">| - package-lock.json</span><br><span class="line">| - package.json</span><br><span class="line">| - README.md</span><br></pre></td></tr></table></figure>

<h3 id="3-webpack配置生产环境和开发环境"><a href="#3-webpack配置生产环境和开发环境" class="headerlink" title="3.webpack配置生产环境和开发环境"></a>3.webpack配置生产环境和开发环境</h3><p>新建三个配置文件，webpack.common.js、webpack.dev.js、webpack.prod.js</p>
<ul>
<li>3.1 webpack.common.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    entry: &#123;</span><br><span class="line">        index: <span class="string">'./client/index.ts'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 编译输出配置</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        <span class="comment">// js生成到dist/js，[name]表示保留原js文件名，并跟随生成的chunkhash</span></span><br><span class="line">        filename: <span class="string">'[name]-[chunkhash:6].js'</span>,</span><br><span class="line">        <span class="comment">// 输出到server/public，输出路径为dist，一定要绝对路径</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'./server/public/dist'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件</span></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">        <span class="comment">// 设置html模板生成路径</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'index.html'</span>,</span><br><span class="line">            template: <span class="string">'./server/views/index.html'</span>,</span><br><span class="line">            chunks: [<span class="string">'index'</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 配置各个模块规则</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">                use: <span class="string">'ts-loader'</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 配置文件扩展名</span></span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">'.ts'</span>, <span class="string">'.js'</span>, <span class="string">'.vue'</span>, <span class="string">'.json'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>3.2 webpack.dev.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">    <span class="comment">// 热监测服务器，动态监测并实时更新页面</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        contentBase: <span class="string">'./server/public/dist'</span>,</span><br><span class="line">        <span class="comment">// 默认端口为8080</span></span><br><span class="line">        port: <span class="number">8081</span>,</span><br><span class="line">        <span class="comment">// 开启热更新</span></span><br><span class="line">        hot: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>3.3 webpack.prod.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">    <span class="comment">// 方便追踪源代码错误</span></span><br><span class="line">    devtool: <span class="string">'#source-map'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>3.4修改package.json</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><br><span class="line">  "build": "webpack --config webpack.prod.js --mode production",</span><br><span class="line">  "dev": "webpack-dev-server --open chrome --config webpack.dev.js --mode development"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-解决ES6转ES5"><a href="#4-解决ES6转ES5" class="headerlink" title="4.解决ES6转ES5"></a>4.解决ES6转ES5</h3><ul>
<li>4.1 安装babel系列依赖</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-loader @babel/core @babel/preset-env --save-dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-runtime @babel/plugin-transform-modules-commonjs --save-dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/runtime --save</span><br></pre></td></tr></table></figure>

<p>注意版本兼容：babel-loader8.x对应babel-core7.X，babel-loader7.x对应babel-core6.X</p>
<ul>
<li>4.2 修改webpack.common.js，这里代码的作用是，在编译时把js文件中ES6转成ES5:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 处理ES6转ES5</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                use: &#123;</span><br><span class="line">                    loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        presets: [<span class="string">'@babel/preset-env'</span>],</span><br><span class="line">                        plugins: [</span><br><span class="line">                            <span class="string">'@babel/plugin-transform-runtime'</span>,</span><br><span class="line">                            <span class="string">'@babel/plugin-transform-modules-commonjs'</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-配置vue开发环境"><a href="#5-配置vue开发环境" class="headerlink" title="5.配置vue开发环境"></a>5.配置vue开发环境</h3><ul>
<li>5.1安装vue-loader、vue、vue-template-compiler、css-loader</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-loader vue vue-template-compiler css-loader -S</span><br></pre></td></tr></table></figure>

<ul>
<li>5.2配置webpack.common.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 处理vue</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">                use: <span class="string">'vue-loader'</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// vue-loader必须和VueLoaderPlugin一起使用，否则报错</span></span><br><span class="line">        <span class="keyword">new</span> VueLoaderPlugin()</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除此之外，在入口文件里引入.vue文件，会出现红色下划线，这是因为没有声明。因此新建types文件夹，在里面新建vue.d.ts:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="built_in">module</span> <span class="string">"*.vue"</span> &#123;</span><br><span class="line">    <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> Vue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为本项目用typescript开发，即使做出了vue的导入导出声明，也还是会提示找不到App.vue文件。因此在项目根目录下新建tsconfig.json文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">        <span class="attr">"target"</span>: <span class="string">"es5"</span>,</span><br><span class="line">        <span class="attr">"module"</span>: <span class="string">"commonjs"</span>,</span><br><span class="line">        <span class="attr">"sourceMap"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"include"</span>: [<span class="string">"client"</span>, <span class="string">"server"</span>],</span><br><span class="line">    <span class="attr">"exclude"</span>: [<span class="string">"node_modules"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>5.3记一次坑</li>
</ul>
<p>启动webpack报如下错误：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span> chunk index [entry]</span><br><span class="line">[name]-[chunkhash:<span class="number">6</span>].js</span><br><span class="line">Cannot use [chunkhash] or [contenthash] <span class="keyword">for</span> chunk <span class="keyword">in</span> <span class="string">'[name]-[chunkhash:6].js'</span> (use [hash] instead)</span><br></pre></td></tr></table></figure>

<p>这是因为在配置webpack输出filename时这么写的，因此直接使用hash即可。</p>
<h3 id="6-在vue里使用stylus"><a href="#6-在vue里使用stylus" class="headerlink" title="6.在vue里使用stylus"></a>6.在vue里使用stylus</h3><ul>
<li>6.1安装依赖包</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader --save-dev</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install stylus-loader stylus --save-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>6.2在webpack.common.js里配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 处理CSS(类似管道，优先使用css-loader处理，最后是style-loader)</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 处理stylus</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.styl(us)$/</span>,</span><br><span class="line">                use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'stylus-loader'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意，每次修改了webpack记得重启项目。</p>
<ul>
<li>6.3现在我们想把样式通过link方式引入</li>
</ul>
<p>先安装MiniCssExtractPlugin:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mini-css-extract-plugin --save-dev</span><br></pre></td></tr></table></figure>

<p>再修改webpack.common.js，将style-loader替换掉:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        ......</span><br><span class="line">        <span class="comment">// 将样式抽离使用link方式引入</span></span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: <span class="string">'[name]-[hash:6].css'</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 配置各个模块规则</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            ......</span><br><span class="line">            <span class="comment">// 处理CSS(类似管道，优先使用css-loader处理，最后是style-loader)</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 处理stylus</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.styl(us)$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>, <span class="string">'stylus-loader'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-处理图片资源"><a href="#7-处理图片资源" class="headerlink" title="7.处理图片资源"></a>7.处理图片资源</h3><ul>
<li><p>7.1安装插件file-loader和url-loader，url-loader基于file-loader，所以两个都要安装。 (也可以只使用file-loader，url-loader在file-loader的基础上扩展了功能，比如能设置小于多少KB的图片进行base64转码等）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader url-loader --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>7.2配置webpack.common.js</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            <span class="comment">// 处理图片</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif|eot|woff|ttf|svg|webp|PNG)$/</span>,</span><br><span class="line">                loader: <span class="string">'url-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    name: <span class="string">'[name]-[hash:6].[ext]'</span>,</span><br><span class="line">                    esModule: <span class="literal">false</span>,    <span class="comment">// 否则图片加载src显示为object module</span></span><br><span class="line">                    limit: <span class="number">10240</span>,  <span class="comment">// 小于10kb的特殊处理，转成base64</span></span><br><span class="line">                &#125;,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-前端开启GZIP压缩"><a href="#8-前端开启GZIP压缩" class="headerlink" title="8.前端开启GZIP压缩"></a>8.前端开启GZIP压缩</h3><p>gzip就是GNUzip的缩写，是一个文件压缩程序，可以将文件压缩进后缀为.gz的压缩包。而我们前端所讲的gzip压缩优化，就是通过gzip这个压缩程序，对资源进行压缩，从而降低请求资源的文件大小。**gzip压缩能力很强，压缩力度可达到70%。</p>
<ul>
<li>8.1安装compression-webpack-plugin</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i compression-webpack-plugin -D</span><br></pre></td></tr></table></figure>

<ul>
<li>8.2在webpack.common.js里配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CompressionWebpackPlugin = <span class="built_in">require</span>(<span class="string">'compression-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        ......</span><br><span class="line">        <span class="keyword">new</span> CompressionWebpackPlugin(&#123;</span><br><span class="line">            test: <span class="regexp">/\.(js|css)$/</span>,</span><br><span class="line">            threshold: <span class="number">10240</span>  <span class="comment">// 这里对大于10k的js和css文件进行压缩</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：compression-webpack-plugin使用会受版本影响，版本过高会冲突报错。解决方案：重新安装较低版本的包</strong></p>
<h3 id="9-使用At-UI"><a href="#9-使用At-UI" class="headerlink" title="9.使用At-UI"></a>9.使用At-UI</h3><p><code>AT-UI</code> 是一款基于 <code>Vue.js 2.0</code> 的前端 UI 组件库，主要用于快速开发 PC 网站中后台产品.</p>
<ul>
<li>9.1 安装</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i at-ui -S</span><br></pre></td></tr></table></figure>

<p>由于at-ui的样式已经独立成一个项目了，因此这里可以npm安装at-ui-style。本人这里直接使用的CDN方式引入以减小开销。</p>
<ul>
<li>9.2打包运行后报错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span> ./node_modules/element-ui/lib/theme-chalk/index.css</span><br><span class="line">Module build failed (<span class="keyword">from</span> ./node_modules/mini-css-extract-plugin/dist/loader.js):</span><br><span class="line">ModuleParseError: Module parse failed: Unexpected character <span class="string">' '</span> (<span class="number">1</span>:<span class="number">0</span>)</span><br><span class="line">You may need an appropriate loader to handle <span class="keyword">this</span> file type, currently no loaders are configured to process <span class="keyword">this</span> file. See https:<span class="comment">//webpack.js.org/concepts#loaders</span></span><br></pre></td></tr></table></figure>

<p>解决：将url-loader替换为file-loader</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理图片</span></span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif|eot|woff|ttf|svg|webp|PNG)(\?\S*)?$/</span>,</span><br><span class="line">                loader: <span class="string">'file-loader'</span></span><br><span class="line">                <span class="comment">// options: &#123;</span></span><br><span class="line">                <span class="comment">//     name: '[name]-[hash:6].[ext]',</span></span><br><span class="line">                <span class="comment">//     esModule: false,    // 否则图片加载src显示为object module</span></span><br><span class="line">                <span class="comment">//     limit: 10240,  // 小于10kb的特殊处理，转成base64</span></span><br><span class="line">                <span class="comment">//     puplicPath: './server/public'</span></span><br><span class="line">                <span class="comment">// &#125;,</span></span><br><span class="line">                <span class="comment">// exclude: /node_modules/</span></span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-制作导航栏"><a href="#10-制作导航栏" class="headerlink" title="10.制作导航栏"></a>10.制作导航栏</h3><ul>
<li>10.1登录或者注册时隐藏导航栏</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">v-if</span>=<span class="string">"$route.name !== 'register'"</span>&gt;</span><span class="tag">&lt;<span class="name">header-section</span>&gt;</span><span class="tag">&lt;/<span class="name">header-section</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>10.2用bcrypt存储的密码，一定要设置足够的长度，否则会一直返回false。</li>
</ul>
<h3 id="11-登录token校验"><a href="#11-登录token校验" class="headerlink" title="11.登录token校验"></a>11.登录token校验</h3><ul>
<li>11.1安装依赖</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i jsonwebtoken --save</span><br><span class="line">npm i koa-jwt --save</span><br></pre></td></tr></table></figure>

<ul>
<li>11.2TS2304: Cannot find name ‘localStorage’</li>
</ul>
<p>配置tsconfig.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">        <span class="attr">"target"</span>: <span class="string">"es5"</span>,</span><br><span class="line">        <span class="attr">"module"</span>: <span class="string">"commonjs"</span>,</span><br><span class="line">        <span class="attr">"sourceMap"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"lib"</span>: [<span class="string">"DOM"</span>, <span class="string">"ES2016"</span>, <span class="string">"ES2015"</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"include"</span>: [<span class="string">"client"</span>, <span class="string">"server"</span>],</span><br><span class="line">    <span class="attr">"exclude"</span>: [<span class="string">"node_modules"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>11.3鉴权中间件一定放在路由的前面。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误处理</span></span><br><span class="line">app.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> next().catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(err.status === <span class="number">401</span>) &#123;</span><br><span class="line">            ctx.status = <span class="number">401</span>;</span><br><span class="line">            ctx.body = <span class="string">'Protected resource, use Authorization header to get access\n'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// unless表示不对登录注册做token校验(颁发token时密钥是secret)</span></span><br><span class="line">app.use(koajwt(&#123; <span class="attr">secret</span>: <span class="string">'secret'</span> &#125;).unless(&#123; <span class="attr">path</span>: [<span class="regexp">/^\/login/</span>, /^\/register/] &#125;));</span><br><span class="line">app.use(bodyParser());</span><br><span class="line">router(app);</span><br></pre></td></tr></table></figure>

<p><strong>前端axios拦截器添加token一定要这样写，否则koa-jwt怎么都不会解析成功！切记！切记！这里我找了一下午的坑~~</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> token = <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'token'</span>));</span><br><span class="line">    <span class="keyword">if</span>(token) &#123;</span><br><span class="line">        config.headers.common[<span class="string">'Authorization'</span>] = <span class="string">'Bearer '</span> + token;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-main组件里登录操作，成功后header里导航栏用户信息不刷新"><a href="#12-main组件里登录操作，成功后header里导航栏用户信息不刷新" class="headerlink" title="12.main组件里登录操作，成功后header里导航栏用户信息不刷新"></a>12.main组件里登录操作，成功后header里导航栏用户信息不刷新</h3><ul>
<li>12.1vuex结合localStorage</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        user: <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'user'</span>)) || <span class="literal">null</span>,</span><br><span class="line">        token: <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'token'</span>)) || <span class="string">''</span></span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        getUser: <span class="function"><span class="params">state</span> =&gt;</span> state.user,</span><br><span class="line">        getToken: <span class="function"><span class="params">state</span> =&gt;</span> state.token</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        setUser(state, payload) &#123;</span><br><span class="line">            state.user = payload.user;</span><br><span class="line">            <span class="comment">// 数据持久化</span></span><br><span class="line">            localStorage.setItem(<span class="string">'user'</span>, <span class="built_in">JSON</span>.stringify(payload.user));</span><br><span class="line">        &#125;,</span><br><span class="line">        setToken(state, payload) &#123;</span><br><span class="line">            state.token = payload.token;</span><br><span class="line">            localStorage.setItem(<span class="string">'token'</span>, <span class="built_in">JSON</span>.stringify(payload.token));</span><br><span class="line">        &#125;,</span><br><span class="line">        logout(state) &#123;</span><br><span class="line">            localStorage.removeItem(<span class="string">'user'</span>);</span><br><span class="line">            localStorage.removeItem(<span class="string">'token'</span>);</span><br><span class="line">            state.user = <span class="literal">null</span>;</span><br><span class="line">            state.token = <span class="string">''</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<ul>
<li>12.2登录组件登录成功后调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储用户信息</span></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'setUser'</span>, &#123; <span class="attr">user</span>: res.data.user &#125;);</span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'setToken'</span>, &#123; <span class="attr">token</span>: res.data.token &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>12.2登出时调用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">logout() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'logout'</span>);</span><br><span class="line">    <span class="built_in">window</span>.location.reload();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这里vuex更新导航栏没刷新，我就加了reload手动刷新，由于时间有限具体原因留到后面再分析。</p>
<ul>
<li>12.3鉴权失败调用(比如token过期了浏览器清除登录信息)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.axios.get(<span class="string">'/sort'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.sorts = res.data;</span><br><span class="line">&#125;, err =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(err.code === <span class="number">-1</span>) &#123;  <span class="comment">// token鉴权失败</span></span><br><span class="line">        <span class="keyword">this</span>.$store.commit(<span class="string">'logout'</span>);</span><br><span class="line">        <span class="keyword">this</span>.$router.push(&#123; <span class="attr">name</span>: <span class="string">'home'</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>综上，vuex结合localStorage能够实现用户登录时保存信息。<strong>vuex 中store的数据需要放到computed 里面才能同步更新视图，切记切记！找了一天的bug，试了n多种方法，才找到是这个原因~~</strong>贴个链接<a href="https://blog.csdn.net/wangshang1320/article/details/98871252">https://blog.csdn.net/wangshang1320/article/details/98871252</a></p>
<h3 id="13-vue中使用input和label实现上传按钮美化"><a href="#13-vue中使用input和label实现上传按钮美化" class="headerlink" title="13.vue中使用input和label实现上传按钮美化"></a>13.vue中使用input和label实现上传按钮美化</h3><ul>
<li>13.1</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;img-modify&quot;&gt;</span><br><span class="line">    &lt;label for&#x3D;&quot;input-img&quot;&gt;</span><br><span class="line">        &lt;at-button type&#x3D;&quot;primary&quot;&gt;点击上传&lt;&#x2F;at-button&gt;</span><br><span class="line">    &lt;&#x2F;label&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;input-img&quot; @change&#x3D;&quot;fileHandler($event)&quot; accept&#x3D;&quot;image&#x2F;*&quot;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.img-modify</span><br><span class="line">    flex 9;</span><br><span class="line">    label </span><br><span class="line">        position absolute;</span><br><span class="line">    input</span><br><span class="line">        opacity 0;</span><br><span class="line">        width 82px;</span><br><span class="line">        height 31.6px;</span><br></pre></td></tr></table></figure>

<ul>
<li>13.2获取file对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> fileHandler(e) &#123;</span><br><span class="line">    <span class="keyword">let</span> file = e.target.files[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="14-前端获取所有关注者的博客，批量处理异步操作"><a href="#14-前端获取所有关注者的博客，批量处理异步操作" class="headerlink" title="14.前端获取所有关注者的博客，批量处理异步操作"></a>14.前端获取所有关注者的博客，批量处理异步操作</h3><ul>
<li>14.1问题描述</li>
</ul>
<p>当我关注了几个博主时，点击导航栏的关注，要获取他们的所有文章。刚开始我是在for循环里操作，但是这样很明显有一个问题，因为for循环是同步代码，我永远只能拿到最后一个请求的结果，所以需要解决这个问题。</p>
<ul>
<li>14.2解决</li>
</ul>
<p>因为我使用的是axios，axios本身封装了promise，而且axios提供了一个all方法批量处理异步请求结果，非常方便。首先定义一个返回的promise数组，暂且命名为promiseAll。然后拿到所有·异步结果后，通过调用axios提供的all方法批量处理回调函数里的结果。具体代码如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取关注者的所有博文</span></span><br><span class="line">getFollowersBlogs() &#123;</span><br><span class="line">    <span class="comment">// 先返回所有异步请求结果</span></span><br><span class="line">    <span class="keyword">let</span> promiseAll = <span class="keyword">this</span>.followerList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.axios.get(<span class="string">'/blog/email/'</span> + item.follow_email);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 再处理所有回调结果</span></span><br><span class="line">    <span class="keyword">this</span>.axios.all(promiseAll).then(<span class="function"><span class="params">resArr</span> =&gt;</span> &#123;</span><br><span class="line">        resArr.forEach(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.blogList = <span class="keyword">this</span>.blogList.concat(res.data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(err.code === <span class="number">-1</span>) &#123;  <span class="comment">// token鉴权失败</span></span><br><span class="line">            <span class="keyword">this</span>.$Modal.info(&#123;</span><br><span class="line">                content: <span class="string">'登录过期,请重新登录!'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">this</span>.$store.commit(<span class="string">'logout'</span>);</span><br><span class="line">            <span class="keyword">this</span>.$router.push(&#123; name: <span class="string">'login'</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-博客待完善功能"><a href="#15-博客待完善功能" class="headerlink" title="15.博客待完善功能"></a>15.博客待完善功能</h3><ol>
<li>首页分页✔</li>
<li>评论✔</li>
<li>删除文章</li>
<li>编辑文章必须修改内容才生效的问题✔</li>
<li>点赞</li>
<li>搜索页-对题目高亮✔</li>
<li>前端url加密。vue里用params传参呢，怕刷新页面参数丢失。用query呢，参数直接显示在地址栏。因此这里考虑对query加密处理。网上搜索到一种方法，用到的是base64加密。✔</li>
<li>反馈</li>
<li>登录注册及搜索支持按键enter✔</li>
<li>密码修改</li>
</ol>
<h3 id="16-前端对url进行base64加密"><a href="#16-前端对url进行base64加密" class="headerlink" title="16.前端对url进行base64加密"></a>16.前端对url进行base64加密</h3><ul>
<li>16.1安装js-base64</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save js-base64</span><br></pre></td></tr></table></figure>

<ul>
<li>16.2在ES6+中使用，这里将挂载到vue实例上，以供全局使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入js-base64对url加密</span></span><br><span class="line"><span class="keyword">import</span> &#123; Base64 &#125; <span class="keyword">from</span> <span class="string">'js-base64'</span>;</span><br><span class="line">Vue.prototype.$Base64 = Base64;</span><br></pre></td></tr></table></figure>

<p>对参数加密：</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.push(&#123; </span><br><span class="line"> name: <span class="string">'search'</span>, </span><br><span class="line"> query: &#123; <span class="attr">keyword</span>: <span class="keyword">this</span>.$Base64.encode(<span class="keyword">this</span>.searchValue) &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>对参数解密：</p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.keyword = <span class="keyword">this</span>.$Base64.decode(<span class="keyword">this</span>.$route.query.keyword);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="17-axios的get请求像post那样传递参数"><a href="#17-axios的get请求像post那样传递参数" class="headerlink" title="17.axios的get请求像post那样传递参数"></a>17.axios的get请求像post那样传递参数</h3><ul>
<li>17.1get请求时的写法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.axios.get(<span class="string">'/blogs/list'</span>, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">        pageSize: <span class="keyword">this</span>.page.pageSize,</span><br><span class="line">        currentPage: <span class="keyword">this</span>.page.currentPage</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.blogList = res.data;</span><br><span class="line">&#125;, err =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>17.2获取参数</li>
</ul>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pageSize = <span class="built_in">Number</span>(ctx.request.query.pageSize),</span><br><span class="line"> currentPage = <span class="built_in">Number</span>(ctx.request.query.currentPage);</span><br></pre></td></tr></table></figure>
</blockquote>
<p>注意数据库查询前参数转为整型，否则会报错。</p>
<h3 id="18-监听登录和注册密码框enter事件实现登录注册"><a href="#18-监听登录和注册密码框enter事件实现登录注册" class="headerlink" title="18.监听登录和注册密码框enter事件实现登录注册"></a>18.监听登录和注册密码框enter事件实现登录注册</h3><ul>
<li>监听最后一个输入框回车事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;at-input v-model=<span class="string">"checkPass"</span> type=<span class="string">"password"</span> placeholder=<span class="string">"请确认密码"</span> size=<span class="string">"large"</span> </span><br><span class="line">:maxlength=<span class="string">"12"</span> :minlength=<span class="string">"6"</span> @keyup.enter.native=<span class="string">"register"</span>&gt;&lt;<span class="regexp">/at-input&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="19-评论"><a href="#19-评论" class="headerlink" title="19.评论"></a>19.评论</h3><ul>
<li>19.1页面点击文本域显示评论按钮</li>
</ul>
<blockquote>
<p>记一次vuex获取用户信息的坑。</p>
<p>因为vuex存储的是user和token，在vue中使用的时候，必须使用计算属性，否则会报错。另外，当退出登录时，因为user和token都已经被删除，所以使用头像等时格外注意判断。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">avatar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(<span class="keyword">this</span>.$store.getters.getUser !== <span class="literal">null</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getUser.avatar;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;,</span><br><span class="line">user: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(<span class="keyword">this</span>.$store.getters.getUser !== <span class="literal">null</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getUser;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>19.2获取博客评论需要获取用户名、头像，因此用户表和评论表需要关联</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户与评论是一对多关系</span></span><br><span class="line">UserModel2.hasMany(CommentModel);</span><br><span class="line">CommentModel.belongsTo(UserModel2, &#123; <span class="attr">foreignKry</span>: <span class="string">'email'</span> &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取博客评论(要返回用户头像和用户名，需关联表，建立一对多关系)</span></span><br><span class="line">findBlogComments: <span class="keyword">async</span> (blog_id) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> CommentModel.findAll(&#123;</span><br><span class="line">        where: &#123;</span><br><span class="line">            blog_id</span><br><span class="line">        &#125;,</span><br><span class="line">        include: [&#123;</span><br><span class="line">            model: UserModel2,</span><br><span class="line">            attributes: [<span class="string">'username'</span>, <span class="string">'avatar'</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述查询语句会报错：</p>
<p>SequelizeDatabaseError: Unknown column ‘comment.userEmail’ in ‘field list’</p>
<p>注释掉关联声明：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户与评论是一对多关系</span></span><br><span class="line"><span class="comment">// UserModel2.hasMany(CommentModel);</span></span><br><span class="line">CommentModel.belongsTo(UserModel2, &#123; <span class="attr">foreignKey</span>: <span class="string">'email'</span>, <span class="attr">targetKey</span>: <span class="string">'email'</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>一个模型要关联另一个模型时，加一句声明即可，否则会报错。</p>
<p><strong>注意点</strong>：</p>
<ol>
<li>type 如果不存在则直接用字符串表示 如：’TIMESTAMP’;</li>
<li>如果需要在更新表字段时记录更新时间，可应使用 updateAt，并设置默认值和对应的字段名。</li>
<li>如果默认值不是具体的数值，可以用 literal 函数去表示。</li>
<li>tableName 表名，u 为别名。</li>
<li>建立关联关系时，如果外键关联的是主键则不用写 targetKey，否则需要。</li>
</ol>
<h3 id="20-总结"><a href="#20-总结" class="headerlink" title="20.总结"></a>20.总结</h3><p>这个博客我当时花了4天时间搭建起来，主要是为了巩固webpack各种配置，以及学习typescript的使用(虽然并没有怎么用ts语法)。整个过程对于自己掌握项目快速搭建很有帮助，希望和我入门前端不久的小伙伴们能够通过这个过程学会webpack的使用。</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="chuck"></figure><p class="title is-size-4 is-block line-height-inherit">chuck</p><p class="is-size-6 is-block">FE</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>BeiJing, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">2</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Inchill" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Inchill"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://github.com/Inchill" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">GitHub</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://www.zhihu.com/people/yu-he-yu-21" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%AE%89%E5%85%A8/"><span class="level-start"><span class="level-item">安全</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><a class="media-left" href="/2020/07/05/webpack-vue-ts-koa2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%90%88%E4%BD%93%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"><p class="image is-64x64"><img class="thumbnail" src="/images/webpack+vue.jpg" alt="webpack+vue+ts+koa2前后端合体搭建博客"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-05T06:56:29.000Z">2020-07-05</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/05/webpack-vue-ts-koa2%E5%89%8D%E5%90%8E%E7%AB%AF%E5%90%88%E4%BD%93%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">webpack+vue+ts+koa2前后端合体搭建博客</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></p></div></article><article class="media"><a class="media-left" href="/2020/07/04/%E5%85%B3%E4%BA%8Eweb%E5%AE%89%E5%85%A8%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%96%B0%E7%9A%84%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95/"><p class="image is-64x64"><img class="thumbnail" src="/images/web-attack.jpg" alt="关于web安全及一些新的防御方法"></p></a><div class="media-content size-small"><p><time dateTime="2020-07-04T13:19:25.000Z">2020-07-04</time></p><p class="title is-6"><a class="link-muted" href="/2020/07/04/%E5%85%B3%E4%BA%8Eweb%E5%AE%89%E5%85%A8%E5%8F%8A%E4%B8%80%E4%BA%9B%E6%96%B0%E7%9A%84%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95/">关于web安全及一些新的防御方法</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E5%AE%89%E5%85%A8/">安全</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/webpack-vue-koa2/"><span class="tag">webpack, vue, koa2</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web%E5%AE%89%E5%85%A8/"><span class="tag">web安全</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="哲班丘" height="28"></a><p class="size-small"><span>&copy; 2020 chuckliu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Inchill"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://inchill.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>